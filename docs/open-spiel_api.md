# OpenSpiel 核心 API 参考

OpenSpiel 由几个核心函数和类组成。此页面可作为有关如何使用 OpenSpiel 主要功能的有用提示。

大多数函数通过 Python 语法和示例进行描述和说明，并且有指向相应 C++ 函数的指针。

**免责声明**：本文旨在作为促进 Python 中 OpenSpiel 开发的指南。但是， [spiel.h](https://github.com/deepmind/open_spiel/blob/master/open_spiel/spiel.h) 仍然是核心 API 文档的唯一真实来源。

## 核心功能

| 方法                                                                 | Python                                                                                                  | C++                                                                                                                  | 描述                                            |
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------- |
| `deserialize_game_and_state(serialized_data: string)`                | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_deserialize_game_and_state.html) | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L1127) | 返回从序列化对象数据重建的 (game, state) 元组。 |
| `load_game(game_string: str)`                                        | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/load_game.html)                       | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L1080) | 返回指定游戏字符串的游戏对象。                  |
| `load_game(game_string: str, parameters: Dict[str, Any])`            | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/load_game.html)                       | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L1083) | 返回指定游戏字符串和参数值的游戏对象。          |
| `registered_names()`                                                 | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/registered_names.html)                | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L1051) | 返回库中所有游戏简称的列表。                    |
| `serialize_game_and_state(game: pyspiel.Game, state: pyspiel.State)` | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_serialize_game_and_state.html)   | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L1104) | 返回创建它的状态和游戏的字符串表示。            |

## 状态方法

| 方法                                         | Python                                                                                                 | C++                                                                                                                 | 描述                                                               |
| -------------------------------------------- | ------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| `action_to_string(player: int, action: int)` | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_action_to_string.html)         | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L289) | 返回指定玩家动作的字符串表示形式。                                 |
| `apply_action(action: int)`                  | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_apply_action.html)             | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L230) | 将指定的操作应用于状态。                                           |
| `apply_actions(actions: List[int])`          | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_apply_actions.html)            | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L581) | 将指定的联合动作（每个玩家的动作）应用于状态。                     |
| `chance_outcomes()`                          | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_chance_outcomes.html)          | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L604) | 返回表示机会结果分布的 (action, prob) 元组列表。                   |
| `current_player()`                           | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_current_player.html)           | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L225) | 返回代理玩家的玩家 ID。                                            |
| `history()`                                  | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_history.html)                  | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L406) | 返回所有玩家自游戏开始以来采取的行动顺序。                         |
| `information_state_string()`                 | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_information_state_string.html) | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L433) | 返回表示当前玩家信息状态的字符串。                                 |
| `information_state_string(player: int)`      | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_information_state_string.html) | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L433) | 返回表示指定玩家信息状态的字符串。                                 |
| `information_state_tensor()`                 | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_information_state_tensor.html) | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L488) | 返回代表当前玩家信息状态的浮点数列表。                             |
| `information_state_tensor(player: int)`      | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_information_state_tensor.html) | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L488) | 返回表示指定玩家信息状态的浮点数列表。                             |
| `is_chance_node()`                           | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_is_chance_node.html)           | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L368) | 如果状态代表机会节点，则返回 True，否则返回 False。                |
| `is_simultaneous_node()`                     | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_is_simultaneous_node.html)     | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L385) | 如果状态表示同时播放器节点，则返回 True，否则返回 False。          |
| `is_terminal()`                              | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_is_terminal.html)              | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L322) | 如果状态为终止（游戏已结束），则返回 True，否则返回 False。        |
| `legal_actions()`                            | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_legal_actions.html)            | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L263) | 返回当前玩家的合法行为列表。                                       |
| `legal_actions(player: int)`                 | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_legal_actions.html)            | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L245) | 返回指定玩家的合法行为列表。                                       |
| `observation_string()`                       | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_observation_string.html)       | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L516) | 返回表示当前玩家观察的字符串。                                     |
| `observation_string(player: int)`            | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_observation_string.html)       | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L516) | 返回一个字符串，表示对指定玩家的观察。                             |
| `observation_tensor()`                       | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_observation_tensor.html)       | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L547) | 返回代表当前玩家观察的浮点数列表。                                 |
| `observation_tensor(player: int)`            | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_observation_tensor.html)       | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L547) | 返回代表指定玩家观察的浮点数列表。                                 |
| `returns()`                                  | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_returns.html)                  | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L346) | 返回回报列表（从游戏开始累计奖励）：每个玩家一个值。               |
| `rewards()`                                  | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_rewards.html)                  | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L325) | 返回中间奖励列表（自玩家上次行动以来获得的奖励）：每个玩家一个值。 |
| `serialize()`                                | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/state_serialize.html)                | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L636) | 返回状态的字符串表示形式，可用于从游戏中重建状态。                 |

## 游戏方法

| 方法                                         | Python                                                                                                           | C++                                                                                                                 | 描述                                                     |
| -------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- |
| `action_to_string(player: int, action: int)` | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_action_to_string.html)                    | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L946) | 返回指定玩家动作的（与状态无关的）字符串表示形式。       |
| `deserialize_state(serialized_data: str)`    | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_deserialize_state.html)                   | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L863) | 从序列化状态字符串重建状态。                             |
| `information_state_tensor_shape()`           | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_information_state_tensor_shape_size.html) | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L815) | 信息状态张量应被视为的形状。                             |
| `information_state_tensor_size()`            | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_information_state_tensor_shape_size.html) | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L827) | 状态信息状态张量函数返回的列表大小（值的数量）。         |
| `max_chance_outcomes()`                      | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_max_chance_outcomes.html)                 | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L778) | 游戏中机会节点的不同机会结果的最大数量。                 |
| `max_game_length()`                          | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_max_game_length.html)                     | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L873) | 任何一场游戏的最大长度（根据游戏树中访问的决策节点数）。 |
| `max_utility()`                              | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_max_min_utility.html)                     | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L795) | 在游戏的任何玩（情节）中可实现的最大效用（回报）。       |
| `min_utility()`                              | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_max_min_utility.html)                     | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L795) | 在游戏的任何玩（情节）中可实现的最小效用（回报）。       |
| `new_initial_state()`                        | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_new_initial_state.html)                   | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L764) | 返回游戏的新初始状态（注意：这可能是一个机会节点）。     |
| `num_distinct_actions()`                     | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_num_distinct_actions.html)                | [C++](https://github.com/deepmind/open_spiel/blob/c6fafb92021a8a3aa5f9746cdb79e74917ed26a5/open_spiel/spiel.h#L752) | 返回游戏中（与状态无关）不同动作的数量。                 |
| `observation_tensor_shape()`                 | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_observation_tensor_shape_size.html)       | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L835) | 观察张量应被视为的形状。                                 |
| `observation_tensor_size()`                  | [Python](https://openspiel.readthedocs.io/en/latest/api_reference/game_observation_tensor_shape_size.html)       | [C++](https://github.com/deepmind/open_spiel/blob/89ba2264a66d9db299108fbd2de4a27b71973f54/open_spiel/spiel.h#L847) | 状态观察张量函数返回的列表大小（值的数量）。             |
